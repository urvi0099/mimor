<ion-content [fullscreen]="true">
  <mat-toolbar class="mim-header-toolbar">
    <a href="https://mimor.com.au" class="mim-main-logo mim-main-logo-orig">
      <img src="assets/img/logoNew.png" class="logo" alt="">
    </a>
    <div class="switch-role">
      <button class="logout-btn" aria-label="logoutbut" (click)="rolesService.logout()">
        <span class="icon"></span><span class="logout">Log Out</span>
      </button>
      <select class="switch-role-select" *ngIf="rolesService.getRoles().length > 1" (change)="rolesService.selectRole($event.target.value)">
        <option *ngFor="let role of rolesService.getRoles()" [value]="role.name">{{role.displayName}}</option>
      </select>
    </div>
  </mat-toolbar>
  <div class="flex-page">
    <div class="mim-panel mim-panel--move-out form-wrapper">
      <div class="email-templates-logo-wrap mim-panel-content-wrap full-width">
        <h2 class="mim-panel-header">Resident access</h2>
        <div class="mim-header-building-info"><span>{{buildName}}</span><span class="access-label"
            *ngIf="bookingList.length > 0">CA</span></div>
        <div class="booking-list" *ngIf="!(pageLoading || loading)">
          <div class="booking-list__item" *ngFor="let booking of bookingList">
            <div class="booking-list__book-info">{{booking.user.name}}({{booking.apartment.name}}):
              {{getFormattedDate(booking.date_from)}} - {{getFormattedDate(booking.date_to)}}</div>
            <div class="checks d-flex align-items-center">
              <mat-checkbox aria-label="checkbox" [(ngModel)]="booking.doMoveOut"></mat-checkbox>
              <mat-checkbox aria-label="checkbox" (click)="changeAccess(booking.commonAreas, booking)"
                [(ngModel)]="booking.commonAreas"></mat-checkbox>
            </div>
          </div>
        </div>
        <div class="loading-bar" *ngIf="pageLoading || loading">
          <ion-spinner color="primary" class="spinner"></ion-spinner>
        </div>
        <div class="btn-wrap btn-wrap-bottom common-areas-btn buttons-back">
          <button mat-button class="mim-btn--back mim-btn back-btn" [disabled]="loading" (click)="changeAccess(true, false)">Common
            areas Off</button>
          <button mat-button class="mim-btn--submit mim-btn primary-btn" [disabled]="loading" (click)="changeAccess(false, false)">Common
            areas ON</button>
        </div>
        <div class="btn-wrap btn-wrap-bottom common-areas-submit buttons-back">
          <button mat-button class="mim-btn--back mim-btn back-btn" [disabled]="loading" (click)="back()">
            <mat-icon class="material-icons">keyboard_backspace</mat-icon> Back
          </button>
          <button mat-button class="mim-btn--submit mim-btn primary-btn" (click)="submit()" aria-label="AO BAO"><span
            ></span>Move Out</button>
        </div>
      </div>
    </div>
  </div>
</ion-content>